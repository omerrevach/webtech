# Use all available CPU cores
worker_processes auto;

# Store the PID file in /tmp because a non-root user can write there
pid /tmp/nginx.pid;

events {
    # Max number of connections per worker
    worker_connections 1024;
}

http {
    # Standard MIME types for serving files
    include /etc/nginx/mime.types;

    # Default file type if nginx can't guess
    default_type application/octet-stream;

    server {
        # Listen on port 80 (as requested in the assignment)
        listen 80;

        # Catch-all server name
        server_name _;

        # Folder where index.html is located
        root /usr/share/nginx/html;

        # Default file to serve
        index index.html;

        # Serve main page (if file doesn't exist, fall back to index.html)
        location / {
            try_files $uri /index.html;
        }

        # Simple health check endpoint for Kubernetes
        location = /healthz {
            # Don't log this endpoint
            access_log off;
            # Set response type
            default_type text/plain;
            # Always return 200 OK
            return 200 "ok";
        }
    }
}
